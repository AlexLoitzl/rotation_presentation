\begin{tikzpicture}
  \useasboundingbox (0,0) rectangle (12.7,8);

  \node<1-> (l) at (1.7,7) {\large$\llbracket \text{echo}_{\text{rec}} \bm{\oplus}\text{getc}_{\text{spec}} \rrbracket$};

  \node<1> (sim) at (7, 7) {\large$\boldsymbol{\preceq}$};
  \node<1> (spec) at (11.8, 7) {\large$\llbracket \text{echo}_{\text{spec}} \rrbracket$};

  \node<2->[right=-.25cm of l,align=left] (p1) {\large$\boldsymbol{\approx>}\! (\bm{\lambda} \kappa_t \sigma_t,$};
  \node<3->[right=-.25cm of p1,align=left] (p2) {\large$\llbracket \text{echo}_{\text{spec}} \rrbracket\boldsymbol{\approx>}\! (\bm{\lambda} \kappa_s \sigma_s,$};
  \node<4->[right=-.25cm of p2,align=left] (p3) {\large$\kappa_t = \kappa_s \ast \sigma_t \preceq \sigma_s))$};

  \node<5-> (pi) at (6.25, 6) {\large$\llbracket \text{echo}_{\text{rec}} \bm{\oplus}\text{getc}_{\text{spec}} \rrbracket \boldsymbol{\approx>}$ \LARGE$\Pi_s$};

  \node<7-> (pi2') at (6.25, 5) {\large$\llbracket \text{echo}_{\text{rec}}\rrbracket \boldsymbol{\approx>} (\bm{\lambda} \kappa_l \sigma_l, \mathtt{\textcolor{ISTAGreen3!90!black}{if}} \_ \mathtt{\textcolor{ISTAGreen3!90!black}{then}}\ \llbracket \text{getc}_{\text{spec}} \rrbracket \boldsymbol{\approx>} ...\ \mathtt{\textcolor{ISTAGreen3!90!black}{else}}\ \Pi_s \kappa_l \sigma)$};

  \node<6-7> (pi2) at (6.25, 4) {\large$\llbracket \text{echo}_{\text{rec}}\rrbracket \boldsymbol{\approx>}$ \LARGE$\Pi_{\bm{\oplus}}($\large$\Pi_s$\LARGE$)$};

  \node<8-9> (pi2) at (6.25, 4) {\large$\llbracket \text{echo}_{\text{rec}}\rrbracket \boldsymbol{\approx>}$ \LARGE$\Pi_{\bm{\oplus}}($\large $\sigma_1, \sigma_2, \sigma_\oplus, \Pi_s(\sigma_{spec})$\LARGE$)$};

  \node<9-10> (g1) at (3,1.75) {\includegraphics[width=2cm]{graphics/ghost1}};
  \node<9-10> (g1) at (6,2) {\includegraphics[width=2cm]{graphics/ghost2}};
  \node<9-10> (g1) at (9,1.75) {\includegraphics[width=2cm]{graphics/ghost3}};

  \node<10-> (pi2) at (6.25, 4) {\large$\llbracket \text{echo}_{\text{rec}}\rrbracket \boldsymbol{\approx>}$ \LARGE$\Pi_{\bm{\oplus}}($\large $\gamma_{\sigma_1}, \gamma_{\sigma_2}, \gamma_{\sigma_\oplus}, \Pi_s(\gamma_{\sigma_{spec}})$\LARGE$)$};

  \node<11-> (pi3) at (6.25, 3) {\large$\llbracket \text{echo}_{\text{rec}}\rrbracket \boldsymbol{\approx>}$ \LARGE$\Pi$};


  \node<12-> (hoare) at (6.25, 2) {TGT Call \textcolor{codegreen}{``echo''} es @ $\Pi$ \{\{$\Phi$\}\}};
  \node<13-> (ghost) at (8, 0.75) {\large $\gamma_{\sigma_1} \leadsto \sigma_1, \gamma_{\sigma_2} \leadsto \sigma_2, \gamma_{\sigma_\oplus} \leadsto \sigma_\oplus, \gamma_{\sigma_{spec}} \leadsto \sigma_{spec}$};

  \draw<13-> ($(hoare.east) - (1.48, 0.2)$) -- (ghost);
  %% \draw (current bounding box.north east) -- (current bounding box.north west) -- (current bounding box.south west) -- (current bounding box.south east) -- cycle;

\end{tikzpicture}
